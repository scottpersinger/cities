<!doctype html>
<html>
  <!-- M5 App Template -->
  
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        
        <title>Cities of the World</title>
        
        <!--
            "@require" annotation is supported by the M5 server to automatically expand to the correct
            Javascript and CSS includes. You don't need to use these, you could use normal tags, but
            it makes things easier. Use "m5 compile" to see the generated code for these.
        
            @require jquery
            @require jquery-mobile
            @require m5.boot, m5.env, m5.support
            @require m5.remote_console
            @require m5.simplestorage
            @require m5.simulator
            @require scrollability
        -->

        <!-- application.js is a good place to put non-display app logic. -->
        <script src="application.js" type="text/javascript"></script>
        
        <style type="text/css" media="screen">
          #cities img {
            height:80px;
          }
        </style>
    </head>
    <body>
        <div >
            <!-- HOME PAGE -->
            <div id="home" data-role="page" data-theme="b">
                <div data-role="header" class="bar top" style="position:absolute">
                    <h1>Cities of the World</h1>
                    <a class="button ui-btn-right" href="#settings" data-transition="slideup">Settings</a>
                </div>
                <div id="container">
                <ul id="cities" data-role="listview" data-inset="true" class="scrollable vertical" data-button-events="false" data-theme="d">
                  <li><a href="#details">
                    <img src="http://t0.gstatic.com/images?q=tbn:ANd9GcQdWPgFQycWBCgH9ENTu18Dig5NtU5CwkM1ZoJmf1PCtMzdLll8" />
                    New York</a></li>
                  <li><a href="#details">
                    <img src="http://t1.gstatic.com/images?q=tbn:ANd9GcQuexouqhiDwS-5etDwbTN7xHcyAle3qVe2XbXZtI-q_d_vpRHn" />
                    Paris</a></li>
                  <li><a href="#details">
                    <img src="http://t3.gstatic.com/images?q=tbn:ANd9GcQdsUi7rro27c8n5CX_OcscNIBkfEjKZD4w03cyy93ZsCHPKGdg8A" />
                    London</a></li>
                  <li><a href="#details">
                    <img src="http://t1.gstatic.com/images?q=tbn:ANd9GcSjSDuDgfWvgmjO1aTQJdLgg9X1Gy4Vqx4xIkvJ1HG7IyMLai-fFQ" />
                    Tokyo</a></li>
                  <li><a href="#details">
                    <img src="http://t0.gstatic.com/images?q=tbn:ANd9GcTzO_PjAed2UnH4BsTHBsxjkJXkRaaTRIw7dV6lU6Q5XmQ-Obud" />
                    Rome</a></li>
                  <li><a href="#details">
                    <img src="http://4.bp.blogspot.com/-IKULUd7AvVw/TgZFJKI7UDI/AAAAAAAAANU/e_9ASnBVBGc/s1600/Brandburger%2BTor.jpg" />
                    Berlin</a></li>
                  <li><a href="#details">
                    <img src="http://www.newspapers24.com/images/cities/moscow.jpg" />
                    Moscow</a></li>
                    <li><a href="#details">
                      <img src="http://t0.gstatic.com/images?q=tbn:ANd9GcQdWPgFQycWBCgH9ENTu18Dig5NtU5CwkM1ZoJmf1PCtMzdLll8" />
                      New York</a></li>
                    <li><a href="#details">
                      <img src="http://t1.gstatic.com/images?q=tbn:ANd9GcQuexouqhiDwS-5etDwbTN7xHcyAle3qVe2XbXZtI-q_d_vpRHn" />
                      Paris</a></li>
                    <li><a href="#details">
                      <img src="http://t3.gstatic.com/images?q=tbn:ANd9GcQdsUi7rro27c8n5CX_OcscNIBkfEjKZD4w03cyy93ZsCHPKGdg8A" />
                      London</a></li>
                    <li><a href="#details">
                      <img src="http://t1.gstatic.com/images?q=tbn:ANd9GcSjSDuDgfWvgmjO1aTQJdLgg9X1Gy4Vqx4xIkvJ1HG7IyMLai-fFQ" />
                      Tokyo</a></li>
                    <li><a href="#details">
                      <img src="http://t0.gstatic.com/images?q=tbn:ANd9GcTzO_PjAed2UnH4BsTHBsxjkJXkRaaTRIw7dV6lU6Q5XmQ-Obud" />
                      Rome</a></li>
                    <li><a href="#details">
                      <img src="http://4.bp.blogspot.com/-IKULUd7AvVw/TgZFJKI7UDI/AAAAAAAAANU/e_9ASnBVBGc/s1600/Brandburger%2BTor.jpg" />
                      Berlin</a></li>
                    <li><a href="#details">
                      <img src="http://www.newspapers24.com/images/cities/moscow.jpg" />
                      Moscow</a></li>
                      <li><a href="#details">
                        <img src="http://t0.gstatic.com/images?q=tbn:ANd9GcQdWPgFQycWBCgH9ENTu18Dig5NtU5CwkM1ZoJmf1PCtMzdLll8" />
                        New York</a></li>
                      <li><a href="#details">
                        <img src="http://t1.gstatic.com/images?q=tbn:ANd9GcQuexouqhiDwS-5etDwbTN7xHcyAle3qVe2XbXZtI-q_d_vpRHn" />
                        Paris</a></li>
                      <li><a href="#details">
                        <img src="http://t3.gstatic.com/images?q=tbn:ANd9GcQdsUi7rro27c8n5CX_OcscNIBkfEjKZD4w03cyy93ZsCHPKGdg8A" />
                        London</a></li>
                      <li><a href="#details">
                        <img src="http://t1.gstatic.com/images?q=tbn:ANd9GcSjSDuDgfWvgmjO1aTQJdLgg9X1Gy4Vqx4xIkvJ1HG7IyMLai-fFQ" />
                        Tokyo</a></li>
                      <li><a href="#details">
                        <img src="http://t0.gstatic.com/images?q=tbn:ANd9GcTzO_PjAed2UnH4BsTHBsxjkJXkRaaTRIw7dV6lU6Q5XmQ-Obud" />
                        Rome</a></li>
                      <li><a href="#details">
                        <img src="http://4.bp.blogspot.com/-IKULUd7AvVw/TgZFJKI7UDI/AAAAAAAAANU/e_9ASnBVBGc/s1600/Brandburger%2BTor.jpg" />
                        Berlin</a></li>
                      <li><a href="#details">
                        <img src="http://www.newspapers24.com/images/cities/moscow.jpg" />
                        Moscow</a></li>
                </ul>
                </div>
            </div>
            
            <div id="details" data-role="page" data-theme="b">
              <div data-role="header">
                  <h1 id="city-title"></h1>
                  <a class="button back" href="#" data-rel="back" data-icon="arrow-l">Back</a>
              </div>
              <div data-role="content" id="city-details">
              </div>
            </div>
              
            <!-- SETTINGS PAGE -->
            <div id="settings" data-role="page" data-theme="b">
                <div data-role="header">
                    <h1>Settings</h1>
                    <a class="button ui-btn-right" href="#" data-rel="back" data-icon="arrow-d">Close</a>
                </div>
                <div>
                  <ul data-role="listview">
                    <li id="app-name"></li>
                    <li id="user-agent"></li>
                  </ul>
                </div>
            </div>
            
        </div>

        <!-- You can put app logic into application.js, separate JS files, or include it in your
            main file. I prefer to put display-related logic inline next to the mark up.
            -->
        <script type="text/javascript">
          // You can use M5.onTouchReady for code that needs to execute after jQTouch custom events are registered.
          // This runs at document.ready, but after jQTouch is setup.
          
          M5.onTouchReady(function() {
            if (navigator.userAgent.match(/Android/i)) {
                window.scrollTo(0,0); // reset in case prev not scrolled  
                var nPageH = $(document).height();
                var nViewH = window.outerHeight;
                if (nViewH > nPageH) {
                  nViewH -= 250;
                  $('BODY').css('height',nViewH + 'px');
                }
                window.scrollTo(0,1);
              }
            
            console.log("Adding handler for detail page");
            $('#cities li').live('mousedown', function() {
              var cityName = $(this).text().trim();
              $.get('data/city_details.json', function(detail_set) {
                var details = detail_set[cityName];
                $('#city-details').html(details);
              }, 'json');
            });
            
            $('#app-name').html("APP: " + M5.settings.app_name);
            $('#user-agent').html("UA: " + navigator.userAgent);
          });
          
        </script>
        
    </body>
</html>
